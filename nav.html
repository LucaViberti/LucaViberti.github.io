<header>
  <div class="site-info">
    <h1 class="site-title">TopHeroes Guide</h1>
  </div>
  <nav>
    <!-- === Language Switcher (Google Translate redirect) === -->
    <div class="lang-switcher" aria-label="Language selector">
      <label for="gt-lang" class="visually-hidden">Translate</label>
      <select id="gt-lang" title="Translate this page">
        <option value="" selected>üåê Translate</option>
        <option value="en">English</option>
        <option value="fr">Fran√ßais</option>
        <option value="es">Espa√±ol</option>
        <option value="de">Deutsch</option>
        <option value="pl">Polski</option>
        <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
        <option value="ja">Êó•Êú¨Ë™û</option>
        <option value="vi">Ti·∫øng Vi·ªát</option>
        <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
        <option value="tl">Filipino</option>
        <option value="sv">Svenska</option>
        <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
        <option value="tr">T√ºrk√ße</option>
      </select>
    </div>
    <!-- === /Language Switcher === -->

    <ul>
      <li><a href="index.html">Home</a></li>

      <!-- HEROES -->
      <li class="has-sub">
        <a href="heroes.html">Heroes</a>
        <ul class="dropdown">
          <li><a href="heroes.html">Overview</a></li>
          <li><a href="league.html">League</a></li>
          <li><a href="nature.html">Nature</a></li>
          <li><a href="horde.html">Horde</a></li>
          <li class="has-flyout">
            <a href="gear.html">Gear</a>
            <button class="flyout-toggle" aria-label="More for Gear" aria-expanded="false" aria-controls="gear-flyout">‚ñæ</button>
            <ul id="gear-flyout" class="flyout">
              <li><a href="exclusive-gear.html">Exclusive Gear</a></li>
            </ul>
          </li>
          <li><a href="pets.html">Pets</a></li>
        </ul>
      </li>

      <!-- BUILDING -->
      <li class="has-sub">
        <a href="building.html">Building</a>
        <ul class="dropdown">
          <li><a href="building.html">Overview</a></li>
          <li><a href="villagers.html">Villagers</a></li>
          <li><a href="lord-gear.html">Lord Gear &amp; Relics</a></li>
        </ul>
      </li>

      <li><a href="research.html">Research</a></li>

      <!-- ADVENTURE -->
      <li class="has-sub">
        <a href="generaladv.html">Adventure</a>
        <ul class="dropdown">
          <li><a href="generaladv.html">Overview</a></li>
          <li><a href="classicadv.html">Classic</a></li>
          <li><a href="seasononeadv.html">Season 1</a></li>
        </ul>
      </li>

      <li><a href="beginners.html">Beginners Guide</a></li>
      <li><a href="shop.html">SHOP</a></li>
      <li><a href="tips.html">Tips &amp; More</a></li>
      <li><a href="https://ko-fi.com/landaadvice" target="_blank" rel="noopener noreferrer">Support Us</a></li>
      <li><a href="privacy.html">Policy&amp;Privacy</a></li>
    </ul>
  </nav>
</header>

<style>
  nav{ position: relative; z-index: 10; padding-top:64px; } /* spazio per selettore */
  nav ul{list-style:none;margin:0;padding:0;display:flex;justify-content:center;flex-wrap:wrap;gap:20px}
  nav ul li{position:relative}
  nav ul li a{
    color:#ccd0dd;text-decoration:none;text-transform:uppercase;font-weight:500;letter-spacing:.05em;
    padding:12px 6px;border-bottom:2px solid transparent;transition:color .3s,border-bottom-color .3s
  }
  nav ul li a:hover{color:#fff;border-bottom-color:#29abe0}

  .site-title{
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight:700;
    background: linear-gradient(90deg,#29abe0,#7dd3fc);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    text-align:center;margin:0;padding:8px 0;
    text-shadow:0 2px 4px rgba(0,0,0,0.3);
  }

  /* dropdown */
  nav ul li .dropdown{
    display:none;position:absolute;top:100%;left:50%;transform:translateX(-50%);
    background:#1c2133;border:1px solid #2b2f3a;border-radius:6px;padding:10px 0;min-width:220px;z-index:1000
  }
  @media (hover:hover){ nav ul li.has-sub:hover > .dropdown{display:block} }
  nav ul li.has-sub.open > .dropdown{display:block}
  nav ul li .dropdown li a{display:block;padding:8px 16px;color:#d1d1d6;white-space:nowrap}
  nav ul li .dropdown li a:hover{background:#25314d;color:#fff}

  /* Gear flyout */
  .has-flyout{display:flex;align-items:center;justify-content:space-between;gap:6px;padding:0 8px}
  .has-flyout > a{flex:1;padding:8px 8px}
  .flyout-toggle{
    background:#25314d;border:1px solid #2b2f3a;border-radius:6px;padding:6px 8px;
    color:#d1d1d6;cursor:pointer;font-size:.8rem;
  }
  .flyout-toggle:hover{background:#2d3a5a;color:#fff}
  .flyout{display:none;position:absolute;top:0;left:100%;margin-left:8px;background:#1c2133;border:1px solid #2b2f3a;border-radius:6px;min-width:180px;padding:8px 0}
  .has-flyout.open > .flyout{display:block}
  @media (max-width:640px){
    .flyout{position:static;margin:6px 0 0 0;display:none;}
    .has-flyout.open > .flyout{display:block}
    .has-flyout{flex-wrap:wrap}
  }

  /* language switcher */
  .visually-hidden{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden;}
  nav .lang-switcher{
    position:absolute; top:12px; right:12px; z-index:9999;
    filter: drop-shadow(0 2px 8px rgba(0,0,0,.25));
  }
  nav .lang-switcher select{
    appearance:none; -webkit-appearance:none; -moz-appearance:none;
    padding:9px 36px 9px 12px; border-radius:10px;
    border:1px solid rgba(255,255,255,.25);
    background:rgba(255,255,255,.08);
    color:#fff;font-size:14px;cursor:pointer;
    background-image:
      linear-gradient(transparent,transparent),
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 20 20" fill="white"><path d="M5.5 7.5l4.5 5 4.5-5"/></svg>');
    background-repeat:no-repeat;background-position:right 10px center;
  }
  nav .lang-switcher select:hover{border-color:#29abe0;}
  @media (max-width:768px){
    nav{padding-top:72px;}
    nav .lang-switcher{top:10px;right:10px;}
    nav .lang-switcher select{font-size:13px;padding:8px 32px 8px 10px;}
  }
</style>

<script>
  // evidenzia pagina attiva
  (function(){
    const current = (location.pathname.split("/").pop() || "index.html").toLowerCase();
    document.querySelectorAll('nav a[href]').forEach(a=>{
      if(a.getAttribute('href')?.toLowerCase() === current){
        a.style.color = '#fff';a.style.borderBottomColor = '#29abe0';
      }
    });
  })();

  // dropdown e flyout
  (function(){
    const isTouch = window.matchMedia('(hover: none)').matches;
    document.querySelectorAll('nav li.has-sub > a').forEach(link=>{
      link.addEventListener('click', function(e){
        const li = this.parentElement;
        if (!isTouch) return;
        if (!li.classList.contains('open')){ e.preventDefault();li.classList.add('open'); }
      });
    });
    document.querySelectorAll('.has-flyout .flyout-toggle').forEach(btn=>{
      btn.addEventListener('click', function(e){
        e.stopPropagation();const li=this.closest('.has-flyout');
        const expanded=this.getAttribute('aria-expanded')==='true';
        this.setAttribute('aria-expanded',!expanded);li.classList.toggle('open',!expanded);
      });
    });
    document.addEventListener('click', e=>{
      if(!document.querySelector('nav').contains(e.target)){
        document.querySelectorAll('nav li.has-sub').forEach(li=>li.classList.remove('open'));
        document.querySelectorAll('.has-flyout').forEach(li=>li.classList.remove('open'));
      }
    });
  })();

  // === Google Translate redirect (sl=en forzato) ===
  (function(){
    const sel=document.getElementById('gt-lang'); if(!sel) return;
    function go(lang){
      if(!lang) return;
      const page=location.origin+location.pathname+location.search;
      const t='https://translate.google.com/translate?hl='+encodeURIComponent(lang)+'&sl=en&tl='+encodeURIComponent(lang)+'&u='+encodeURIComponent(page);
      window.location.href=t;
    }
    sel.addEventListener('change',()=>go(sel.value));
    sel.addEventListener('input', ()=>go(sel.value));
  })();
</script>
